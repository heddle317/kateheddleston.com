{% extends "base.html" %}
{% import "talk_item.html" as talk_item with context %}
{% block head %}
  {% assets "tiles_css" %}
    <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
  {% endassets %}
{% endblock %}
{% block content %}
    <div id='container' class="js-masonry">
        {% for talk in talks %}
            {% set image_link = talk.base_url + "/" + talk.image_name %}
            {{ talk_item.show(talk.uuid, image_link, talk.title, talk.date, loop.index) }}
        {% endfor %}
    </div>
{% endblock %}
{% block script %}
    <script type='text/javascript'>
        // or with jQuery
        var $container = $('#container');
        $container.hide();
        $container.imagesLoaded().progress( function( imgLoad, image ) {
            $container.show();
            $container.masonry({
                columnWidth: 100,
                itemSelector: ".item",
                gutter: 10,
                isFitWidth: true,
                transitionDuration: 0
            });
        });
    </script>
{% endblock %}
